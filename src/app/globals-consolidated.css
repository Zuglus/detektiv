/* Font optimization: Moved to head with preconnect and preload */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   CONSOLIDATED DESIGN SYSTEM - UNIFIED APPROACH
   ======================================== */

/* CSS Custom Properties - Single source of truth */
:root {
  /* Typography */
  --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  --font-display: 'Playfair Display', serif;
  
  /* Glass morphism effects */
  --glass-light: rgba(255, 255, 255, 0.1);
  --glass-medium: rgba(255, 255, 255, 0.15);
  --glass-strong: rgba(255, 255, 255, 0.25);
  --glass-border: rgba(255, 255, 255, 0.2);
  
  /* Timing system */
  --transition-fast: 200ms;
  --transition-normal: 300ms;
  --transition-smooth: 600ms;
  
  /* Shadow system */
  --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.12), 0 4px 16px rgba(0, 0, 0, 0.08);
  --shadow-card-hover: 0 20px 60px rgba(0, 0, 0, 0.18), 0 12px 30px rgba(0, 0, 0, 0.12);
  --shadow-card-dark: 0 8px 32px rgba(0, 0, 0, 0.2), 0 4px 16px rgba(0, 0, 0, 0.15);
  --shadow-card-dark-hover: 0 20px 60px rgba(0, 0, 0, 0.25), 0 12px 30px rgba(0, 0, 0, 0.18);
}

/* Base Styles */
* {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-primary);
  line-height: 1.6;
  @apply text-secondary-800 bg-secondary-50 selection:bg-primary-500 selection:text-white antialiased;
}

/* ========================================
   UNIFIED CARD SYSTEM
   Replaces all .card, .card-*, .principle-card, etc.
   ======================================== */

@layer components {
  .unified-card {
    @apply relative overflow-hidden rounded-2xl border transition-all duration-300;
    @apply will-change-transform transform-gpu; /* Hardware acceleration */
    box-shadow: var(--shadow-card);
  }
  
  /* Card variants */
  .unified-card--default {
    @apply bg-white/97 border-white/25 backdrop-blur-sm;
  }
  
  .unified-card--dark {
    @apply bg-secondary-800 border-secondary-700 text-white;
    box-shadow: var(--shadow-card-dark);
  }
  
  .unified-card--emergency {
    @apply bg-white/97 border-white/25 backdrop-blur-sm;
    background-image: linear-gradient(135deg, rgba(239, 68, 68, 0.03), rgba(251, 146, 60, 0.03));
  }
  
  .unified-card--accent {
    @apply bg-white/97 border-white/25 backdrop-blur-sm;
    background-image: linear-gradient(135deg, rgba(51, 153, 85, 0.05), rgba(245, 158, 11, 0.05));
  }
  
  .unified-card--principle {
    @apply bg-secondary-800/92 border-primary-400/80 text-white backdrop-blur-sm;
  }
  
  .unified-card--pricing {
    @apply bg-white border-2 border-secondary-200;
  }
  
  .unified-card--trust {
    @apply bg-primary-50 border-primary-200;
  }
  
  /* Card sizes */
  .unified-card--compact { @apply p-4; }
  .unified-card--default { @apply p-6; }
  .unified-card--large { @apply p-8; }
  
  /* Interactive behavior */
  .unified-card--interactive {
    @apply cursor-pointer;
  }
  
  .unified-card--interactive:hover {
    @apply -translate-y-2 scale-[1.025];
    box-shadow: var(--shadow-card-hover);
  }
  
  .unified-card--dark.unified-card--interactive:hover {
    box-shadow: var(--shadow-card-dark-hover);
  }
  
  /* Glass effect top border */
  .unified-card--default::before,
  .unified-card--emergency::before,
  .unified-card--accent::before {
    content: '';
    @apply absolute top-0 left-0 right-0 h-px;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
  }
}

/* ========================================
   UNIFIED BUTTON SYSTEM
   Replaces all .btn-* classes
   ======================================== */

@layer components {
  .unified-btn {
    @apply inline-flex items-center justify-center font-medium uppercase tracking-wide;
    @apply transition-all duration-300 ease-out transform-gpu will-change-transform;
    @apply focus:outline-none focus:ring-4 focus:ring-primary-600/40 focus:ring-offset-2;
  }
  
  /* Button variants */
  .unified-btn--primary {
    @apply bg-gradient-to-br from-primary-700 to-primary-800 text-white;
    @apply shadow-lg hover:shadow-xl border-0;
    @apply hover:from-primary-800 hover:to-primary-900;
  }
  
  .unified-btn--secondary {
    @apply bg-secondary-100 text-secondary-700 border border-secondary-200;
    @apply hover:bg-secondary-200 hover:border-secondary-300 hover:text-secondary-800;
  }
  
  .unified-btn--outline {
    @apply bg-transparent text-primary-600 border-2 border-primary-600;
    @apply hover:bg-primary-600 hover:text-white;
  }
  
  .unified-btn--ghost {
    @apply bg-transparent text-secondary-700 border-0;
    @apply hover:bg-secondary-100 hover:text-secondary-800;
  }
  
  /* Button sizes */
  .unified-btn--sm { @apply px-4 py-2 text-sm rounded-lg min-h-[36px]; }
  .unified-btn--md { @apply px-6 py-3 text-base rounded-xl min-h-[44px]; }
  .unified-btn--lg { @apply px-8 py-4 text-lg rounded-xl min-h-[52px]; }
  .unified-btn--xl { @apply px-10 py-5 text-xl rounded-2xl min-h-[60px]; }
  
  /* Interactive states */
  .unified-btn:hover:not(:disabled) {
    @apply scale-105 -translate-y-1;
  }
  
  .unified-btn:active:not(:disabled) {
    @apply scale-[1.02] translate-y-0;
    transition-duration: 100ms;
  }
  
  .unified-btn:disabled {
    @apply opacity-50 cursor-not-allowed pointer-events-none;
  }
}

/* ========================================
   NAVIGATION SYSTEM - Glass morphism
   ======================================== */

@layer components {
  .nav-glass {
    background: rgba(255, 255, 255, 0.97);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.18);
    transition: all 300ms cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  
  .nav-glass--scrolled {
    background: rgba(255, 255, 255, 0.98);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
  
  .nav-glass--home {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
  }
  
  /* Navigation link interactions */
  .nav-link {
    @apply relative overflow-hidden transition-all duration-300;
    @apply hover:-translate-y-1 active:translate-y-0 active:scale-98;
  }
  
  .nav-link::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-br from-primary-500/10 to-primary-500/5;
    @apply rounded-lg opacity-0 scale-80 transition-all duration-200;
    z-index: -1;
  }
  
  .nav-link:hover::before,
  .nav-link:focus::before {
    @apply opacity-100 scale-100;
  }
}

/* ========================================
   MICROINTERACTIONS - Simplified
   ======================================== */

@layer components {
  .social-icon {
    @apply relative transition-all duration-300 transform-origin-center;
    @apply hover:scale-110 hover:rotate-3 active:scale-105 active:rotate-1;
  }
  
  .social-icon::before {
    content: '';
    @apply absolute inset-0 w-0 h-0 bg-primary-500/20 rounded-full;
    @apply transition-all duration-400 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2;
    z-index: -1;
  }
  
  .social-icon:hover::before {
    @apply w-full h-full scale-125;
  }
}

/* ========================================
   ACCESSIBILITY ENHANCEMENTS
   ======================================== */

/* Enhanced focus system */
*:focus-visible {
  @apply outline outline-primary-600 outline-offset-2 rounded-sm;
  outline-width: 4px;
  box-shadow: 0 0 0 2px theme('colors.white'), 0 0 0 6px theme('colors.primary.600');
  transition: box-shadow 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.focus-dark:focus-visible {
  @apply outline outline-white outline-offset-2;
  box-shadow: 0 0 0 2px theme('colors.secondary.900'), 0 0 0 6px theme('colors.white');
}

.focus-enhanced:focus-visible {
  @apply relative z-[999];
  outline-width: 4px;
  outline-offset: 3px;
  box-shadow: 
    0 0 0 2px theme('colors.white'),
    0 0 0 8px theme('colors.primary.600'),
    0 4px 12px theme('colors.primary.600 / 40%');
  animation: focusPulse 2s ease-in-out infinite;
}

@keyframes focusPulse {
  0%, 100% { 
    box-shadow: 
      0 0 0 2px theme('colors.white'),
      0 0 0 8px theme('colors.primary.600'),
      0 4px 12px theme('colors.primary.600 / 40%');
  }
  50% { 
    box-shadow: 
      0 0 0 2px theme('colors.white'),
      0 0 0 10px theme('colors.primary.500'),
      0 6px 20px theme('colors.primary.600 / 50%');
  }
}

/* Screen reader only */
.sr-only {
  @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
  clip: rect(0, 0, 0, 0);
}

/* ========================================
   SCROLL REVEAL ANIMATIONS
   ======================================== */

@layer utilities {
  .scroll-reveal {
    @apply opacity-0 translate-y-8 transition-all duration-700 ease-out;
  }
  
  .scroll-reveal.revealed {
    @apply opacity-100 translate-y-0;
  }
}

/* ========================================
   RESPONSIVE OPTIMIZATIONS
   ======================================== */

/* Mobile performance optimizations */
@media (max-width: 768px) {
  .unified-card--interactive:hover,
  .unified-btn:hover,
  .social-icon:hover {
    transform: none !important;
  }
  
  .nav-glass {
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
  }
  
  /* Faster transitions for better INP */
  .unified-card,
  .unified-btn,
  .nav-link {
    transition-duration: 150ms !important;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    transform: none !important;
    scroll-behavior: auto !important;
  }
  
  .scroll-reveal {
    @apply opacity-100 translate-y-0 !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .text-white { color: #ffffff !important; }
  .bg-primary-500 { background-color: #000000 !important; }
  .border-primary-500 { border-color: #000000 !important; }
}

/* ========================================
   UTILITY GRADIENTS
   ======================================== */

@layer utilities {
  .gradient-primary {
    background: linear-gradient(135deg, #339955 0%, #247d44 100%);
  }
  
  .gradient-accent {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
  }
}

/* ========================================
   LEGACY COMPATIBILITY
   Keep these for backward compatibility during transition
   ======================================== */

/* Map old classes to new unified system */
.card { @apply unified-card unified-card--default unified-card--default; }
.card-dark { @apply unified-card unified-card--dark unified-card--default; }
.card-emergency { @apply unified-card unified-card--emergency unified-card--large; }
.card-accent { @apply unified-card unified-card--accent unified-card--large; }
.card-compact { @apply unified-card unified-card--default unified-card--compact; }
.principle-card { @apply unified-card unified-card--principle unified-card--default; }

.btn-primary { @apply unified-btn unified-btn--primary unified-btn--md; }
.btn-secondary { @apply unified-btn unified-btn--secondary unified-btn--md; }

/* Interactive behavior for legacy cards */
.card:hover,
.card-dark:hover,
.card-emergency:hover,
.card-accent:hover,
.principle-card:hover {
  @apply unified-card--interactive;
}